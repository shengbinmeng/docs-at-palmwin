网络控制算法的测试环境

# 模拟测试环境

## 客户端测试机器人

客户端代码编译出可执行文件echorobot.linux（目前主要在Linux上运行该机器人），
向其传入专用的配置文件echorobot-ctrl.conf即可启动专用机器人来测试网络控制算法。

该专用机器人将模拟数据的产生和发送，并对控制结果进行响应，例如改变码率等。
其与普通机器人的区别主要在于：从配置文件读取udpServer的地址（和端口），而不是从遵照命令使用分配来的地址；
按指定码率生成数据；禁用了P2P；将客户端的某些数据项发送给reportServer，从而绘制曲线。

## 网络状况模拟和结果评测

用TC等软件来模式网络带宽、丢包率等情况。手动指定一个“实际”带宽曲线，然后看在特定策略下发送数据的码率能否与该曲线的变化相符。

# 实际测试环境

## 自行调试

可以用[cg_voip](https://git.v5.cn/voip/cg_voip)仓库中的voip_sample样例程序。在其中声明以下外部变量

```
extern char test_udp_server[19];
extern int test_udp_port;
```
并赋值为想要连接的udpServer（算法运行的机器）的地址和端口。例如：

```
strcpy(test_udp_server, "10.9.241.136");
test_udp_port = 7012;
```

这些变量在网络库中定义。如果它们被赋了值，网络库将会用它们作为udpServer。

voip_sample中已有预先添加的用户，这些用户可以登录并呼叫彼此。

## 测试人员测试

修改后的udpServer由洛哥部署到测试环境服务器，然后由冬哥负责用实际客户端进行测试。

测试环境服务器有多台，客户端将选择性地连接其中一台。通过查看客户端log可以找到连接的哪一台服务器：在log中搜索“call_summary”，该日志信息中显示了最终连接的udpServer（部署运行的端口为700x形式）。

找到所连接的服务器后，登录该服务器，并在`/opt/server/udpServer7007/`目录下查看服务器log。
